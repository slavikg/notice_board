<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
<%= form_for @user do |f| %>

	<%= render 'shared/error_messages', object: f.object %>

	<%= f.label :login %>
	<%= f.text_field :login %>

	<%= f.label :full_name %>
	<%= f.text_field :full_name %>

	<%= f.label :birthday %>
	<%= f.text_field :birthday %>

	<%= f.label :email %>
	<%= f.text_field :email %>

	<%= f.label :address %>
	<%= f.text_field :address %>

	<%= f.label :city %>
	<%= f.text_field :city %>

	<%= f.label :state %>
	<%= f.text_field :state %>

	<%= f.label :country %>
	<%= f.text_field :country %>

	<%= f.label :zip %>
	<%= f.text_field :zip %>

	<div class="map_container" style='width: 800px;'>
		<div id="map" style='width: 800px; height: 400px;'></div>
	</div>

	<%= f.label :password %>
	<%= f.password_field :password %>

	<%= f.label :password_confirmation, "Confirmation" %>
	<%= f.password_field :password_confirmation %>

	<div class="new_line">
		<%= f.submit "Save changes", class: 'btn btn-large btn-primary' %>
	</div>
<% end %>
<script type="text/javascript">
	var mapStyle = [
		{
        "featureType": "landscape.natural",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "color": "#e0efef"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "hue": "#1900ff"
            },
            {
                "color": "#c0e8e8"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": 100
            },
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "labels",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit.line",
        "elementType": "geometry",
        "stylers": [
            {
                "visibility": "on"
            },
            {
                "lightness": 700
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "color": "#7dcdcd"
            }
        ]
    }
	]

	handler = Gmaps.build('Google');
	handler.buildMap({
		provider: {styles: mapStyle},
		internal: {id: 'map'}},
		function(){
			var markers = handler.addMarkers(<%=raw @hash.to_json %>);
	  // var markers = handler.addMarkers([
	  //   { lat: 43, lng: 3.5},
	  //   { lat: 45, lng: 4},
	  //   { lat: 47, lng: 3.5},
	  //   { lat: 49, lng: 4},
	  //   { lat: 51, lng: 3.5}
	  // ]);
	  handler.bounds.extendWith(markers);
	  handler.fitMapToBounds();
	});
</script>